<div class="content min-vw-25">
  <section class="mt-3 w-100">
    <button
      pButton
      type="button"
      class="p-button-text mb-1 my-button"
      (click)="back()"
    >
      {{ "collection.back_button" | translate }}
    </button>
    <p-carousel
      [value]="items"
      styleClass="custom-carousel mb-1"
      [numVisible]="3"
      [numScroll]="2"
      [circular]="true"
      [responsiveOptions]="responsiveOptions"
    >
      <ng-template pTemplate="header">
        <p class="fs-3 text-center mb-5">
          Wybierz przedmiot by wyświetlić jego dary
        </p>
      </ng-template>
      <ng-template let-item pTemplate="item">
        <a (click)="chooseItem(item)">
          <!-- CARD BODY -->
          <div
            class="card-body item-card"
            [ngClass]="{ 'choosen-item': item.id === choosenItemId }"
          >
            <h5 class="card-title">{{ item.name }}</h5>
            <div class="row">
              <div class="col-12">
                <div class="row">
                  <mat-card-subtitle class="mb-1"
                    >{{
                      "category." + item.category.toLocaleLowerCase()
                        | translate
                    }}
                  </mat-card-subtitle>
                </div>
                <div class="row">
                  <mat-card-subtitle
                    >{{ "collection.type" | translate }}
                    {{
                      "item." + item.type.toLocaleLowerCase() | translate
                    }}</mat-card-subtitle
                  >
                </div>
              </div>
            </div>

            <mat-divider class="ms-4 me-4 mt-2 mb-2"></mat-divider>

            <!-- CARD CONTENT IF NOT UNLIMITED TYPE -->
            <div
              *ngIf="item.type.toString().toLocaleLowerCase() !== 'unlimited'"
            >
              <p class="card-text">
                {{ "collection.current" | translate }} {{ item.currentAmount }}
                <span *ngIf="item.type.toString() == 'AMOUNT'">{{
                  "item.suffix" | translate
                }}</span>
                <span *ngIf="item.type.toString() == 'WEIGHT'"> kg</span>
              </p>
              <p class="card-text">
                {{ "collection.max" | translate }} {{ item.maxAmount }}
                <span *ngIf="item.type.toString() == 'AMOUNT'">{{
                  "item.suffix" | translate
                }}</span>
                <span *ngIf="item.type.toString() == 'WEIGHT'"> kg</span>
              </p>

              <div class="row d-flex justify-content-center">
                <div class="col-8 pt-2 pe-0">
                  <p-progressBar
                    [value]="(item.currentAmount / item.maxAmount) * 100"
                  ></p-progressBar>
                </div>
                <div class="col-1">
                  <i
                    class="far fa-check-circle fa-lg"
                    [ngClass]="
                      item.currentAmount + item.value == item.maxAmount
                        ? 'icon-check'
                        : 'icon-disabled'
                    "
                  ></i>
                </div>
              </div>
            </div>
          </div>
          <!-- END CARD BODY -->
        </a>
      </ng-template>
    </p-carousel>
    <button
      class="btn my-btn-primary btn-sm mt-1 me-2 mb-3"
      style="padding-left: 2rem; padding-right: 2rem"
      (click)="showAll()"
      [hidden]="choosenItemId == '-1'"
    >
      Pokaż wszystkie
    </button>
    <p-table
      [value]="submittedItems"
      [tableStyle]="{ 'min-width': '50rem' }"
      id="itemList"
      class="mt-5"
    >
      <ng-template pTemplate="header" let-columns>
        <tr>
          <th>Nazwa przedmiotu</th>
          <th>Nazwa użytkownika</th>
          <th>Przekazana ilość</th>
          <th>Data</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item let-columns="columns">
        <tr ngClass="table-white">
          <td>{{ item.itemName }}</td>
          <td>{{ item.username }}</td>
          <td *ngIf="item.itemType.toString() == 'UNLIMITED'">-</td>
          <td *ngIf="item.itemType.toString() != 'UNLIMITED'">
            {{ item.amount }}
            {{
              "suffix." + item.itemType.toString().toLocaleLowerCase()
                | translate
            }}
          </td>
          <td>{{ item.submitTime | date : "dd/MM/yyyy" }}</td>
        </tr>
      </ng-template>
    </p-table>
    <!-- PAGINATOR -->
    <!-- <div class="mt-5 mb-1 paginator">
      <p-paginator
        [rows]="pageSize"
        [totalRecords]="totalRecords"
        (onPageChange)="changePage($event)"
      ></p-paginator>
    </div> -->
  </section>
</div>
